<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Analogue Video Hat</title>
    <link rel="stylesheet" href="skeleton.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="crab.css" media="screen" title="no title" charset="utf-8">
  </head>
  <body>

    <main class="container">

      <div class="row">
        <header>
          <h1>CRAB</h1>
          <ul>
            <li><a href="index.htm">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#bom">Bill of materials</a></li>
            <li><a href="#files">Files</a></li>
            <li><a href="#build">Build Instructions</a></li>
            <li><a href="#installation">Installation Instructions</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
          </ul>
        </header>
      </div>

      <div class="row">
        <article>
        <h2 id="about">About</h2>
        <h4>What is it?</h4>

        <p>The analogue cap was designed in response to the release of the raspberry pi zero. For a low cost it helps to break out the analogue outputs from the zero. The analogue ports it provides are stereo audio, composite and VGA. All connectors are aligned to the same edge as the Zero's existing connectors. The board is ideal if you want to utilize a computer monitor, especially if it has built in speakers like many 'multimedia' TFT screens that now cost very little second hand.</p>

        <p>Excluding the composite output it will also work on any Raspberry Pi that has the 40 pin GPIO header [ Raspberry Pi A/B+ and the Raspberry Pi B2 ]</p>

        <h4>It is a kit</h4>

        <p>To make it as cheap as possible and easy to adapt for different purposes it is a kit / bare PCB that uses only through-hole components. Due to a lack of space all components are folded this may make it a little fiddly to construct if you have less experience but it is not too hard. There will be full instructions on how to build the kit experienced and amateur alike in both document and video form.</p>

        <p>What this means though is that you can choose which way up the cap is mounted, if you what the VGA or not and if you are building into an enclosure the pads can be directly soldered.</p>

        </article>
      </div>

      <div class="row">
        <h1 id="bom">Bill of materials</h1>

          <table class="u-full-width">
          <thead>
            <tr>
              <th>Type</th>
              <th>Value</th>
              <th>Designators</th>
              <th>Further Information</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="4"><em>Resistors for VGA DAC (exclude if you dont want it)</em></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>510R</td>
              <td>R1, R7, R13</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>1K</td>
              <td>R2, R8, R14</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>2K</td>
              <td>R3, R9, R15</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>3K9</td>
              <td>R4, R10, R16</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>8K2</td>
              <td>R5, R11, R17</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>16K</td>
              <td>R6, R12, R18</td>
              <td></td>
            </tr>
            <tr>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>120R</td>
              <td>R19, R20</td>
              <td></td>
            </tr>
              <td colspan="4"><em>Resistors for audio</em></td>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>270R</td>
              <td>R21, R22</td>
              <td></td>
            </tr>
            <tr>
              <td>1% 0.25w axial resistor</td>
              <td>150R</td>
              <td>R23, R24</td>
              <td></td>
            </tr>
            <tr>
              <td colspan="4"><em>Capacitors and Diodes</em></td>
            </tr>
            <tr>
              <td>Ceramic Capacitor</td>
              <td>33n</td>
              <td>C1, C2</td>
              <td></td>
            </tr>
            <tr>
              <td>5mm Electrolytic Capacitor</td>
              <td>10uF</td>
              <td>C1, C2</td>
              <td></td>
            </tr>
            <tr>
              <td>Schottky Diode</td>
              <td>BAT42</td>
              <td>D1, D2, D3, D4</td>
              <td></td>
            </tr>
            <tr>
              <td colspan="4"><em>Connectors</em></td>
            </tr>
            <tr>
              <td>40 Way socket</td>
              <td>2x20 2.54mm</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>4 Way socket</td>
              <td>2x2 2.54mm</td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td>RCA socket</td>
              <td></td>
              <td>Composite video out</td>
              <td></td>
            </tr>
            <tr>
              <td>3.5mm TRS socket</td>
              <td></td>
              <td>Stereo audio out</td>
              <td><a href="http://www.rapidonline.com/cables-connectors/3-5mm-miniature-stereo-pcb-jack-socket-63493">Rapid Electronics</a></td>
            </tr>
            <tr>
              <td>VGA female socket</td>
              <td>15 way D-sub (DE-15)</td>
              <td>VGA video</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="row">

        <article>
        <h2 id="files">Files</h2>
        <p>All CAD files and documents are available to download and use for free, licenced under GNU GPL. The latest files can be found in the <a href="https://github.com/crab-design/analogue_cap">Github Repository</a></p>
        <ul>
          <li><a href="https://github.com/crab-design/analogue_cap/tree/master/PCB/Diptrace%20files">Diptrace Layout</a> : Source files for the board layout and schematic</li>
          <li><a href="https://github.com/crab-design/analogue_cap/tree/master/PCB/Gerber%20Files">Gerber Files</a> : Files you can send to for manufacture</li>
          <li><a href="https://github.com/crab-design/analogue_cap/tree/master/PCB/Gerber%20Files">Bitmap Files</a> : Files you can etch yourself (note its double sided so can be quite difficult to align)</li>
        </ul>
        </article>

      </div>


      <div class="row">
          <article>
          <h1 id="build">Build Instructions</h1>
          <p>These instructions are to help you if you are unsure how to put together this kit. If you have assembled a board and are confident the board is clearly marked so it should be pretty simple to assemble with just the Bill of Materials (BOM). I can give you no warranty that you will end up with a working board at the end but I hope it is easy enough that it should work. If this is your first time you have assembled a PCB just take your time and double check everything as you go along, especially check before soldering as you are commiting the component to its position and it can be hard to remove a component if you lack experience.</p>

          <p>Please note these instructions were made with a protoype board so it looks a little different; there are big holes drilled in the VGA footprint(fixing an error). But fundamentally all parts are in the same place apart from R19 and R20 which swaped places next to eachother</p>

          <img src="assets/AVhat/AV_hat_allparts.jpg" />
          <p>First make sure you have all the components, you should have all the parts listed above. Lay them all out and double check as it is quite easy to lose them. There should be an included BOM on a small card, or use the list on this page to check</p>

          <h4>Step 1</h4>
          <p><em>If you do not wish to solder on the VGA then leave this part out and skip to step 3</em></p>

          <img src="assets/AVhat/AV_hat_DAC_Resistors.jpg" />

          <p>The best way to assemble it is to start with the resistors as they are harder to put in once other components are on the board. Select resistors R1 to R18 as pictured, these are the digital to analogue resistors that convert the signal for VGA. We will first place all these resistors in and solder them at once.</p>

          <img src="assets/AVhat/AV_PCB_DAC_highlight.png" />

          <p>The DAC resistor section is highlighted above, R1 to R18 are located here. The value of the resistor is marked by its colour banding. First we should start with R1, R7, and R13 which is the value 510R they need to be placed into the holes where their designator is marked.</p>

          <p>Bend the resistor as shown, it does not matter which way around the resistor goes and then place into the hole as shown. Bend the wires outwards underneath so that it holds itself in place, do this for all 3 resistors.</p>
        </div>

        <div class="row">
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_DAC_Res_Bend.jpg" />
        </div>
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_DAC_placement.jpg" />
        </div>
        </div>
        <div class="row">

        <p>Make sure that you bend them underneath so that the resistor holds in tight and does not fall out</p>

        <p>Then move onto the next three (1k) then 3 x 2k, 3 x 3k9, 3 x 8k2 and 16k. Dont solder anything until you have put all the resistors in because it is very easy to get them the wrong way around.</p>

        <p>Double check if not quadrouple check you have all the resistors in the right place. If you solder them into the wrong place you may have trouble fixing it!</p>

        <h4>Step 2</h4>
        <p>It should now look like this, now we will solder these down and the DAC is done!</p>

        <img src="assets/AVhat/AV_hat_DAC_presoldered.jpg" />

        <p>Turn on your soldering iron wait for it to heat up properly, you can test it by melting a little bit of solder on the tip (wipe it off though!), it should only take 5 mins max. Use a wet sponge or metal bush as I have to clean the tip. The soldering tip should have a metalic shine to it, this is the point that you should soldering with. If the iron tip is dull grey and when you put solder on it it just balls and falls of you will have trouble soldering with it. It is difficult to descripe how to fix this, but it may be best to get a new tip or alternate soldering iron.</p>

        <p>Flip over the board and place the soldering iron tip onto the lower left pad as pictured. You want to press the iron gently against the wire and the pad. Then feed in a small amount of solder, it should seem to suck into the pad the move on to the lower one next to it.</p>

        <img src="assets/AVhat/AV_hat_DAC_soldering.jpg" />

        <p>Repeat for all the lower pads and then using the snips cut all the lower pads off. Now rotate the board so the unsoldered wires are downwards and repeat the same soldering and snipping. It should look like this.</p>
        </div>

        <div class="row">
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_DAC_cutting1.jpg" />
        </div>
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_DAC_cutting2.jpg" />
          <br />
        </div>
        </div>

        <div class="row">
        <h4>Step 3</h4>
        <p>There are 6 remaining resistors, in 3 values and 4 capacitors in 2 values, check them against the BOM. The resistors are soldered in the same way as the DAC and the capacitors should not need their wires bent to fit the holes. </p>

        <img src="assets/AVhat/AV_hat_Remaining_Resistors_and_Caps.jpg" />

        <p>For the H-sync and V-sync there is R19 and R20 highlighted in the picture. Skip these out if you do not want to solder in VGA.</p>

        <p>For audio there is R21 and R22 which is 270R solder them into their respective places (use picture below as guide) Then also for audio is R23 and R24 solder them the same way too. remeber to check you have the right holes!</p>



        <img src="assets/AVhat/AV_hat_DAC_all_resistors_done.jpg" />
        <br />

        <h4>Step 4</h4>
        <p>Now is the capacitors, the small brown ones are not polarised this means they can go in either way but the black ones are polarised so <strong>be careful with their orientation.</strong></p>

        <p>First put in and solder C3 and C4</p>

        <img src="assets/AVhat/AV_PCB_Caps_highlight.png" />

        <p>Now put in C1 and C2, the white section with a '-' marked on it as shown is the negative so the other wire is positive. There is a small '+' symbol on the board to show wich way around it is installed. Solder them in.</p>

        <p>Finally we need to put in the protective diodes for the audio jack, these are polarised. Because of limited space I could not mark the diodes orientation as a line. So instead the orientation is marked with a circle around one pad. On the diode you should see a black stripe, the black stripe end should go into the pad with the circle. Be careful here if it is the wrong way around the audio will not work.</p>

        <img src="assets/AVhat/AV_hat_DAC_all_passive_done.jpg" />
        <br />
        <h4>Step 5</h4>
        <p>Now for the connectors! there are 5 of them each serving a different analogue output. They are all completely optional even the 40 way socket, you could directly the board directly to the raspberry pi header (but that would severly limit its use!). Or if you were building this into a device you could solder connectors from a panel to the socket footprints, its up to you! for best flexibility just use the connectors.</p>

        <img src="assets/AVhat/AV_hat_Connectors.jpg" />

        <p>We will start with the hardest first, the socket to connect to the Pi. It does not have an orienation.</p>

        <p>I find the best way to do this is to place it in and solder one pin at each end. Then hold up the board and see if the connector is flush with the board, if it is not use the soldering iron to melt the pad and you can push it flat as shown. Dont touch the pins you are soldering! Then solder every single pin down (yes all 40!)</p>

        </div>

        <div class="row">
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_40way4.jpg" />
        </div>
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_40way5.jpg" />
          <br />
        </div>
        </div>

        <div class="row">
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_40way1.jpg" />
        </div>
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_40way2.jpg" />
          <br />
        </div>
        </div>

        <div class="row">

        <p>Repeat for the smaller 4 way pin, it should fit in perfectly next to it.</p>

        <h4>Step 6</h4>

        <p>Now push in the connectors you need, the composite and VGA connectors should click in and be flush with the board as shown. The 3.5mm jack may not hold it so well so use the same method as in step 6 by soldering one pin first to get its position against the board then solder all the others.</p>

        <p>Solder all the pins of the connectors on the VGA solder the 2 clips too, this makes it mechanically stronger for the bulky VGA.</p>

        </div>


        <div class="row">
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_bottom_comp.jpg" />
        </div>
        <div class="six columns">
          <img src="assets/AVhat/AV_hat_top_vga.jpg" />
          <br />
        </div>
        </div>

        <div class="row">

        <img src="assets/AVhat/AV_hat_assembled.jpg" />

        <br />

        <h4>Step 7</h4>
        <p>If you are using a Raspberry Pi Zero and it has no header, you should now solder in the included header, use the same method as step 6 taking care not to touch the pin you are soldering.</p>



        <p>Next you need to configure the Raspberry Pi image for VGA see the instructions for that.</p>

        <h2 id="installation">Installation Instructions</h2>
        <p>Coming Soon</p>
        <h2 id="troubleshooting">Troubleshooting</h2>
        <p>Coming Soon</p>

        </div>

      </article>

    </main>


      <script type="text/javascript">
    WebFontConfig = {
      google: { families: [ 'Righteous::latin' ] }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })(); </script>


    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-72586576-1', 'auto');
    ga('send', 'pageview');

  </script>
